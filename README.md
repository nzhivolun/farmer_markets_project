# Farmer Markets App

Приложение для работы с данными фермерских рынков.  
Реализовано на **Python 3**, с использованием **PostgreSQL** в контейнере **Docker**.  
Доступны два интерфейса:
- **Консольное меню** (терминал);
- **Веб-версия на Streamlit** (браузерный интерфейс).

---

## Возможности приложения
- Просмотр списка рынков с пагинацией.  
- Поиск по городу, штату или ZIP-коду.  
- Просмотр детальной информации о рынке (адрес, ссылки, категории, координаты).  
- Добавление и удаление отзывов.  
- Сортировка рынков (по рейтингу, городу, штату, расстоянию).  
- Поиск рынков в радиусе **30 миль** от координат.  
- Просмотр рынков по категориям с быстрым поиском и пагинацией.  
- Удаление рынков (с каскадным удалением данных).  

---

## Требования
- [Docker Desktop](https://www.docker.com/products/docker-desktop) (Windows, macOS)  
- [Docker Engine + Compose](https://docs.docker.com/engine/install/) (Linux)  

> **Важно:** Python и PostgreSQL локально устанавливать не нужно — всё разворачивается внутри контейнеров.

---

## Запуск проекта
### Windows
1. Убедитесь, что Docker Desktop запущен.  
2. Для консольной версии:  
   ```bat
   start_app.bat

### Для веб-версии (Streamlit):
3. start_app-streamlit.bat


---

### Linux / macOS
В терминале выполните:

chmod +x start_app.sh
./start_app.sh        # консольная версия

chmod +x start_app-streamlit.sh
./start_app-streamlit.sh   # веб-версия Streamlit

---

###

После запуска Streamlit откроется по адресу:
http://127.0.0.1:8501

если запускаете в WSL или по сети — используйте IP вашей машины

---

Проверка работы контейнеров
Выполните: docker ps
Вы должны увидеть два контейнера:

farmer_app (приложение)
farmer_db (PostgreSQL)


## Остановка проекта
Для остановки контейнеров выполните: docker-compose down


Структура проекта

farmer_markets_project/
├── app/
│   ├── main.py              # Консольное меню
│   ├── app_streamlit.py     # Веб-интерфейс (Streamlit)
│   ├── ui_markets_streamlit.py  # Страницы Streamlit
│   ├── markets.py           # Логика работы с рынками
│   ├── reviews.py           # Добавление/удаление отзывов (процедурно)
│   ├── reviews_oop.py       # Класс ReviewManager (ООП)
│   ├── categories.py        # Работа с категориями (консоль)
│   ├── utils.py             # Проверки, пагинация (консоль)
│   ├── db.py                # Подключение к БД
│   ├── load_data.py         # Загрузка CSV в БД
│
├── setup/
│   ├── setup_db.py          # Создание базы и таблиц
│   ├── config.py            # Настройки подключения к БД
│   ├── init.sql             # SQL-схема БД
│   ├── Export.csv           # Исходные данные
│   ├── requirements.txt     # Зависимости Python
│
├── Dockerfile
├── docker-compose.yml
├── start_app.sh             # Запуск (Linux/Mac, консоль)
├── start_app.bat            # Запуск (Windows, консоль)
├── start_app-streamlit.sh   # Запуск (Linux/Mac, веб)
├── start_app-streamlit.bat  # Запуск (Windows, веб)
├── README.md                # Инструкция по запуску
└── docs/
    └── Admin_User_Guide.pdf
    └── User_Guide.pdf



После запуска в консоли появится меню:

=== МЕНЮ ===
1. Список рынков
2. Поиск по городу/штату/индексу
3. Детали рынка
4. Добавить отзыв
5. Удалить отзыв
6. Сортировка рынков
7. Поиск по радиусу (30 миль)
8. Удалить рынок
9. Показать рынки по категории
0. Выход


Веб-версия (Streamlit)

Навигация через левый сайдбар.
В правой части страницы отображаются результаты поиска, список рынков, карточки рынка и формы.
Все разделы повторяют консольный функционал, но с удобным UI (формы, кнопки, таблицы, пагинация).



Примеры использования

Пункт 7 (Поиск по радиусу):
Введите широту: 44.411036
Введите долготу: -72.140337

Вывод: рынки в радиусе 30 миль.

Пункт 9 (Поиск по категории):
Список категорий:
1. Bakedgoods
2. Cheese
...
Введите ID категории: 12


Пагинация:
[<<] Первая | [+] Следующая | [-] Предыдущая | [>>] Последняя | [число] Перейти | [0] Меню


Полезные команды
Очистка Docker (если нужно пересоздать всё):

docker-compose down
docker system prune -af
docker volume prune -f
docker-compose up --build
Или запустить батник на windows, .sh на Linux и MacOS
Так же можно запустить программу в Limux на Windows, через wsl
